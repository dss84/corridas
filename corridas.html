<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Horários das Principais Corridas</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-blue: #1a365d;
      --accent-green: #10b981;
      --day-color-friday: #dbeafe;
      --day-color-saturday: #fef9c3;
      --day-color-sunday: #fee2e2;
    }
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f0f4f8;
      color: var(--primary-blue);
      line-height: 1.6;
    }
    .header {
      background-color: var(--primary-blue);
      color: white;
      padding: 2rem 1rem;
      text-align: center;
    }
    .table-container {
      background-color: white;
      border-radius: 0.5rem;
      padding: 1rem;
      margin-top: 2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .table {
      border-collapse: separate;
      border-spacing: 0;
      width: 100%;
    }
    .category-badge {
      font-size: 0.75rem;
      padding: 0.3rem 0.6rem;
      border-radius: 0.3rem;
      background-color: #2563eb;
      color: white;
    }
    .time-badge {
      background-color: var(--primary-blue);
      color: white;
      padding: 0.2rem 0.5rem;
      border-radius: 0.2rem;
    }
    /* Nova animação de fundo pulsante */
    @keyframes pulse-bg {
      0%, 100% { background-color: #26c45d; }
      50% { background-color: #017a2e; }
    }
    /* Linha atual com fundo pulsante */
    .current-event {
      animation: pulse-bg 2s infinite;
      color: white !important;
    }
    /* Cores alternadas por dia */
    .day-friday { background-color: var(--day-color-friday); }
    .day-saturday { background-color: var(--day-color-saturday); }
    .day-sunday { background-color: var(--day-color-sunday); }
    /* Estados de eventos */
    .past-event {
      background-color: #4b5563 !important;
      color: #e5e7eb !important;
    }
    .past-event .category-badge,
    .past-event .time-badge {
      opacity: 0.7;
    }
    /* Responsividade */
    @media (max-width: 768px) {
      .table th, .table td {
        font-size: 0.85rem;
        padding: 0.5rem;
      }
      .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      .table {
        min-width: 600px;
      }
    }
    .footer {
      background-color: var(--primary-blue);
      color: white;
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
<!-- Cabeçalho -->
<header class="header">
  <h1>Horários das Principais Corridas do Fim de Semana</h1>
  <p>2 a 4 de Maio de 2025</p>
</header>
<!-- Filtro por categoria -->
<div class="container my-3">
  <div class="row align-items-center">
    <div class="col-12 col-md-3">
      <label for="categoryFilter" class="form-label fw-bold">Filtrar por Categoria:</label>
    </div>
    <div class="col-12 col-md-9">
      <select class="form-select" id="categoryFilter">
        <option value="all">Todas</option>
        <option value="Stock Light">Stock Light</option>
        <option value="TN">TN</option>
        <option value="Stock Car Pro">Stock Car Pro</option>
        <option value="Fórmula 1">Fórmula 1</option>
      </select>
    </div>
  </div>
</div>
<!-- Tabela -->
<main class="container my-4">
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0" id="raceTable">
      <thead class="table-dark">
        <tr>
          <th>Dia</th>
          <th>Data</th>
          <th>Categoria</th>
          <th>Evento</th>
          <th>Horário</th>
          <th>Local</th>
        </tr>
      </thead>
      <tbody id="raceTableBody"></tbody>
    </table>
  </div>
</main>
<!-- Rodapé -->
<footer class="footer">
  <p>&copy; 2025 - Diego Sirtoli</p>
</footer>
<script>
  const races = [
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Light", event: "Shakedown", time: "07:30", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "TN", event: "Treino Livre 2", time: "09:15", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Light", event: "Treino Livre 2", time: "09:55", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "TN", event: "Treino Livre 3", time: "11:20", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Car Pro", event: "Shakedown", time: "11:50", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Light", event: "Treino Livre 3", time: "12:35", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Car Pro", event: "Treino Livre 1", time: "13:10", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Fórmula 1", event: "Treino Livre 1", time: "13:30", location: "Miami" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Light", event: "Classificação", time: "14:45", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Car Pro", event: "Treino Livre 2", time: "15:05", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "TN", event: "Classificação", time: "16:10", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Stock Car Pro", event: "Treino Livre 3", time: "17:00", location: "Interlagos" },
    { day: "Sexta-feira", date: "02/05/2025", category: "Fórmula 1", event: "Qualy Sprint", time: "17:30", location: "Miami" },
    { day: "Sábado", date: "03/05/2025", category: "Stock Car Pro", event: "Treino Livre 4", time: "09:20", location: "Interlagos" },
    { day: "Sábado", date: "03/05/2025", category: "TN", event: "Corrida 1", time: "10:15", location: "Interlagos" },
    { day: "Sábado", date: "03/05/2025", category: "TN", event: "Corrida 2", time: "10:45", location: "Interlagos" },
    { day: "Sábado", date: "03/05/2025", category: "Stock Car Pro", event: "Treino Livre 5", time: "11:35", location: "Interlagos" },
    { day: "Sábado", date: "03/05/2025", category: "Fórmula 1", event: "Corrida Sprint", time: "13:00", location: "Miami" },
    { day: "Sábado", date: "03/05/2025", category: "Stock Car Pro", event: "Classificação", time: "14:45", location: "Interlagos" },
    { day: "Sábado", date: "03/05/2025", category: "Stock Light", event: "Corrida 1", time: "16:05", location: "Interlagos" },
    { day: "Sábado", date: "03/05/2025", category: "Fórmula 1", event: "Classificação", time: "17:00", location: "Miami" },
    { day: "Sábado", date: "03/05/2025", category: "TN", event: "Corrida 3", time: "17:10", location: "Interlagos" },
    { day: "Sábado", date: "03/05/2025", category: "TN", event: "Corrida 4", time: "17:40", location: "Interlagos" },
    { day: "Domingo", date: "04/05/2025", category: "TN", event: "Corrida 5", time: "08:20", location: "Interlagos" },
    { day: "Domingo", date: "04/05/2025", category: "Stock Car Pro", event: "Corrida", time: "12:10", location: "Interlagos" },
    { day: "Domingo", date: "04/05/2025", category: "Stock Light", event: "Corrida 2", time: "13:45", location: "Interlagos" },
    { day: "Domingo", date: "04/05/2025", category: "Stock Light", event: "Corrida 3", time: "14:20", location: "Interlagos" },
    { day: "Domingo", date: "04/05/2025", category: "TN", event: "Corrida 6", time: "15:35", location: "Interlagos" },
    { day: "Domingo", date: "04/05/2025", category: "Fórmula 1", event: "Corrida", time: "17:00", location: "Miami" }
  ];

  function createRaceRows(filterCategory = "all") {
    const tbody = document.getElementById("raceTableBody");
    tbody.innerHTML = "";
    const now = new Date();
    let filteredRaces = filterCategory === "all" ? [...races] : races.filter(race => race.category === filterCategory);
    
    // Ordena os eventos por data e horário
    filteredRaces.sort((a, b) => {
      const dateA = new Date(parseInt(a.date.split('/')[2]), parseInt(a.date.split('/')[1]) - 1, parseInt(a.date.split('/')[0]), parseInt(a.time.split(':')[0]), parseInt(a.time.split(':')[1]));
      const dateB = new Date(parseInt(b.date.split('/')[2]), parseInt(b.date.split('/')[1]) - 1, parseInt(b.date.split('/')[0]), parseInt(b.time.split(':')[0]), parseInt(b.time.split(':')[1]));
      return dateA - dateB;
    });
    
    // Encontrar o índice do evento atual
    let currentEventIndex = -1;
    for (let i = 0; i < filteredRaces.length; i++) {
      const race = filteredRaces[i];
      const [day, month, year] = race.date.split('/');
      const [hours, minutes] = race.time.split(':');
      const eventDateTime = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), parseInt(hours), parseInt(minutes));
      
      // Se o evento começa depois de agora, ainda não chegamos ao evento atual
      if (eventDateTime > now) {
        break;
      }
      
      // Se há um próximo evento
      if (i < filteredRaces.length - 1) {
        const nextRace = filteredRaces[i + 1];
        const [nDay, nMonth, nYear] = nextRace.date.split('/');
        const [nHours, nMinutes] = nextRace.time.split(':');
        const nextDateTime = new Date(parseInt(nYear), parseInt(nMonth) - 1, parseInt(nDay), parseInt(nHours), parseInt(nMinutes));
        
        // Se o próximo evento já começou, este evento já terminou
        if (nextDateTime <= now) {
          continue;
        }
      }
      
      // Se chegamos aqui, este é o evento atual
      currentEventIndex = i;
      break;
    }
    
    // Criar as linhas da tabela
    filteredRaces.forEach((race, i) => {
      const tr = document.createElement("tr");
      
      // Aplicar classe de cor por dia
      switch(race.day) {
        case "Sexta-feira": tr.className = "day-friday"; break;
        case "Sábado": tr.className = "day-saturday"; break;
        case "Domingo": tr.className = "day-sunday"; break;
      }
      
      // Marca como evento passado se for anterior ao evento atual
      if (i < currentEventIndex || (currentEventIndex === -1 && i < filteredRaces.length - 1)) {
        tr.classList.add("past-event");
      } 
      // Marca como evento atual
      else if (i === currentEventIndex) {
        tr.classList.add("current-event");
      }
      
      // Preencher conteúdo da linha
      tr.innerHTML = `
        <td>${race.day}</td>
        <td>${race.date}</td>
        <td><span class="category-badge">${race.category}</span></td>
        <td>${race.event}</td>
        <td><span class="time-badge">${race.time}</span></td>
        <td>${race.location}</td>
      `;
      tbody.appendChild(tr);
    });
  }
  
  // Inicializar a tabela
  document.addEventListener("DOMContentLoaded", () => {
    createRaceRows();
    
    // Atualizar quando o filtro mudar
    document.getElementById("categoryFilter").addEventListener("change", (e) => {
      createRaceRows(e.target.value);
    });
    
    // Atualizar a cada minuto para manter o evento atual correto
    setInterval(() => {
      createRaceRows(document.getElementById("categoryFilter").value);
    }, 60000);
  });
</script>
</body>
</html>